<%- include("partials/header") %>

<div class="mx-10 my-20 min-h-[calc(76vh-120px)]">
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% if (tasks.length === 0) { %>
      <div class="text-center text-gray-500 col-span-full">No tasks available.</div>
    <% } else { %>
      <% tasks.forEach(task => { %>
        <a href="/tasks/<%= task._id %>" 
           class="block rounded-xl bg-white/30 backdrop-blur-2xl shadow-xl border border-white/30 p-6 border-l-4 
           <%= task.priority === 'high' ? 'border-red-400' : task.priority === 'medium' ? 'border-yellow-400' : 'border-green-400' %> 
           hover:scale-[1.02] hover:shadow-2xl transition">
          
          <h2 class="text-xl font-semibold mb-1"><%= task.title %></h2>

          <% if (task.mainImage) { %>
            <img src="/uploads/<%= task.mainImage %>" alt="<%= task.title %>" 
                 class="w-full h-40 object-cover rounded-xl mb-4 shadow-md" />
          <% } %>

          <p><%= task.discription %></p>
          <p class="text-sm"><strong>Status:</strong> <%= task.status %></p>
          <p class="text-sm"><strong>Deadline:</strong> <%= task.deadline.toDateString() %></p>
          <p class="text-sm"><strong>Priority:</strong> <%= task.priority %></p>
          <p class="text-sm"><strong>Follow-up:</strong> <%= task.followup %></p>
        </a>
      <% }); %>
    <% } %>
  </div>
</div>

<%- include("partials/footer") %>
